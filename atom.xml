<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>初</title>
  
  <subtitle>神</subtitle>
  <link href="https://chushen.xyz/atom.xml" rel="self"/>
  
  <link href="https://chushen.xyz/"/>
  <updated>2022-03-13T09:06:55.175Z</updated>
  <id>https://chushen.xyz/</id>
  
  <author>
    <name>初神</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ranger兼容性</title>
    <link href="https://chushen.xyz/posts/20ebc6a7/"/>
    <id>https://chushen.xyz/posts/20ebc6a7/</id>
    <published>2022-03-04T09:33:00.000Z</published>
    <updated>2022-03-13T09:06:55.175Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h1 id="Ranger兼容性"><a href="#Ranger兼容性" class="headerlink" title="Ranger兼容性"></a>Ranger兼容性</h1><blockquote><p>本文档最后更新于：**&lt;%+ tp.file.last_modified_date() %&gt;** ，请注意文章时效性！</p></blockquote><h2 id="兼容性矩阵"><a href="#兼容性矩阵" class="headerlink" title="兼容性矩阵"></a>兼容性矩阵</h2><p><em>具体组件兼容性见<a href="https://github.com/apache/ranger/blob/master/pom.xml">Ranger源码pom文件</a>，其他版本不一定支持。</em></p><p><strong>兼容性矩阵：</strong></p><table><thead><tr><th>插件</th><th>Ranger1.2.0</th><th>Ranger2.0.0</th><th>Ranger2.1.0</th><th>Ranger2.2.0</th></tr></thead><tbody><tr><td>Atlas</td><td>1.1.0</td><td>2.0.0-2.1.0</td><td>2.1.0(2.0.0存在功能不兼容)</td><td>2.2.0</td></tr><tr><td>ElastciSearch</td><td>NULL</td><td>6.2.2</td><td>7.6.0</td><td>7.6.0</td></tr><tr><td>HDFS(Yarn)</td><td>2.7.1</td><td>3.0.0-3.1.1</td><td>3.1.1</td><td>3.3.0</td></tr><tr><td>Hive</td><td>2.1.1-2.3.2</td><td>3.1.0(可采用Ranger1.2.0版本jar包，以兼容Hive2.x)</td><td>3.1.2</td><td>3.1.2</td></tr><tr><td>HBase</td><td>1.3.2</td><td>2.0.2</td><td>2.0.2</td><td>2.2.6</td></tr><tr><td>Kafka</td><td>1.0.0</td><td>2.0.0</td><td>2.4.0</td><td>2.5.0</td></tr><tr><td>Knox</td><td>1.0.0</td><td>1.2.0</td><td>1.2.0</td><td>1.4.0</td></tr><tr><td>Kudu</td><td>NULL</td><td>NULL</td><td>未知</td><td>未知</td></tr><tr><td>Kylin</td><td>2.3.0</td><td>2.5.0</td><td>2.6.4</td><td>2.6.4</td></tr><tr><td>Nifi</td><td>未知</td><td>未知</td><td>未知</td><td>未知</td></tr><tr><td>Nifi Registry</td><td>未知</td><td>未知</td><td>未知</td><td>未知</td></tr><tr><td>Ozone</td><td>NULL</td><td>0.4.0-alpha</td><td>0.4.0-alpha</td><td>1.0.0</td></tr><tr><td>Solr</td><td>5.5.4</td><td>7.7.1</td><td>7.7.1</td><td>7.7.1</td></tr><tr><td>Sqoop</td><td>1.99.7</td><td>1.99.7</td><td>1.99.7</td><td>1.99.7</td></tr><tr><td>Storm</td><td>1.2.0</td><td>1.2.0</td><td>1.2.0</td><td>1.2.0</td></tr><tr><td>Trino(旧包名Presto)</td><td>NULL</td><td>310(<a href="https://issues.apache.org/jira/browse/RANGER-2395">317之后不支持</a>)</td><td>333(<a href="https://issues.apache.org/jira/browse/RANGER-2754">实现行/列级安全性</a>)</td><td>333</td></tr><tr><td>[[CDH]]</td><td>未知</td><td>CDH6.x</td><td>CDH6.x(Hive不可用)</td><td>未知</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">Ranger兼容性</summary>
    
    
    
    <category term="兼容性" scheme="https://chushen.xyz/categories/%E5%85%BC%E5%AE%B9%E6%80%A7/"/>
    
    
    <category term="ranger" scheme="https://chushen.xyz/tags/ranger/"/>
    
    <category term="兼容性" scheme="https://chushen.xyz/tags/%E5%85%BC%E5%AE%B9%E6%80%A7/"/>
    
  </entry>
  
  <entry>
    <title>Ranger2.x插件集成</title>
    <link href="https://chushen.xyz/posts/2c8f6697/"/>
    <id>https://chushen.xyz/posts/2c8f6697/</id>
    <published>2022-02-10T06:48:00.000Z</published>
    <updated>2022-03-13T09:07:44.016Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h1 id="Ranger2-x插件集成"><a href="#Ranger2-x插件集成" class="headerlink" title="Ranger2.x插件集成"></a>Ranger2.x插件集成</h1><blockquote><p>本文档最后更新于：**&lt;%+ tp.file.last_modified_date() %&gt;** ，请注意文章时效性！</p></blockquote><h2 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h2><p><a href="/posts/20ebc6a7#%E5%85%BC%E5%AE%B9%E6%80%A7%E7%9F%A9%E9%98%B5" data-pjax-state target="_Blank">兼容性矩阵</a></p><h2 id="通用配置"><a href="#通用配置" class="headerlink" title="通用配置"></a>通用配置</h2><h3 id="插件安装位置"><a href="#插件安装位置" class="headerlink" title="插件安装位置"></a>插件安装位置</h3><p><em>后续插件配置的<strong>修改</strong>以及<strong>enable</strong>须在对应主机上执行。</em></p><ul><li>HDFS Plugin应安装在<strong>Name Node</strong>所在主机上</li><li>Hive Plugin应安装在<strong>HiveServer2</strong>所在主机上</li><li>HBase Plugin应安装在<strong>Master和Regional Server</strong>所在主机上</li><li>Knox Plugin应安装在<strong>Knox</strong>所在主机上</li><li>Storm Plugin应安装在<strong>Storm</strong>所在主机上</li><li>Kafka Plugin应安装在<strong>Kafka</strong>所在主机上</li><li>Solr Plugin应安装在<strong>Solr</strong>所在主机上</li><li>YARN plugin应安装在<strong>Resource Manager</strong>所在主机上</li><li>Sqoop plugin应安装在<strong>Sqoop</strong>所在主机上</li><li>Kylin plugin应安装在<strong>Kylin</strong>所在主机上</li><li>Elasticsearch plugin应安装在<strong>Elasticsearch</strong>所在主机上</li></ul><h3 id="配置内容"><a href="#配置内容" class="headerlink" title="配置内容"></a>配置内容</h3><p>修改<code>./ranger-pluginName/install.properties</code>文件，用于自动替换生成的文件内容。如果是集成的是CDH组件，那么<strong>每次重启组件前</strong>都需先执行<code>./ranger-pluginName/enable-pluginName-plugin.sh</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">以下必需项后文不再赘述，如有额外配置会指出配置内容。</span><br><span class="line"></span><br><span class="line">**自行执行**：修改`install.properties`文件，然后执行`enable`。所有修改完成后，重启对应组件</span><br></pre></td></tr></table></figure><p>插件的配置大同小异，包含以下<strong>必需项</strong>：</p><ol><li><strong>POLICY_MGR_URL</strong>=<a href="http://rangeradmin:6080/">http://rangeradmin:6080</a></li><li><strong>REPOSITORY_NAME</strong>=cs_hdfs # 对应ranger web界面的服务名</li><li><strong>COMPONENT_INSTALL_DIR_NAME</strong>=/opt/cloudera/parcels/CDH/lib/hadoop-hdfs</li><li><strong>XAAUDIT.SOLR.ENABLE</strong>=true # 推荐使用solr。此外还有file、hdfs、es、aws等可供选择</li><li><strong>XAAUDIT.SOLR.URL</strong>=<a href="http://ip-192-168-222-126.bdvis.org:8983/solr/ranger_audits">http://ip-192-168-222-126.bdvis.org:8983/solr/ranger_audits</a></li><li><strong>XAAUDIT.SOLR.IS_ENABLED</strong>=true</li><li><strong>XAAUDIT.SOLR.SOLR_URL</strong>=<a href="http://ip-192-168-222-126.bdvis.org:8983/solr/ranger_audits">http://ip-192-168-222-126.bdvis.org:8983/solr/ranger_audits</a></li></ol><p>其他<strong>非必需项</strong>：</p><ol><li>XAAUDIT.SOLR.ZOOKEEPER=NONE # 暂不清楚zk如何配置；URL和zk二选一，启用zk则自动忽略URL</li><li>XAAUDIT.SOLR.FILE_SPOOL_DIR=/var/log/hadoop-hdfs/audit/solr/spool # 保持默认即可</li><li>XAAUDIT.SOLR.USER=ranger_solr # 保持默认即可</li><li>XAAUDIT.SOLR.PASSWORD=NONE # 保持默认即可</li><li>CUSTOM_USER=xx # 保持默认即可。确保用户及组存在并且是你要用的，用于修改权限啥的，详细看enable脚本</li><li>CUSTOM_GROUP=hadoop # 保持默认即可</li><li>检查XAAUDIT.SUMMARY.ENABLE是否为true # 有些插件的配置里没有，待研究源码 #TODO</li></ol><h3 id="服务配置"><a href="#服务配置" class="headerlink" title="服务配置"></a>服务配置</h3><p>如果Ranger没有生成对应的服务，手动配置一个即可。</p><p>Rangerg各组件服务<strong>必配置项</strong>：</p><ul><li><code>policy.download.auth.users/USERNAME</code>。该配置决定插件所启用的组件能否以其启动用户来拉取ranger上的policy配置。如果不配置，将导致插件无法生效，即无法在插件状态界面上看到。</li></ul><h3 id="验证插件生效"><a href="#验证插件生效" class="headerlink" title="验证插件生效"></a>验证插件生效</h3><p>验证安装结果：</p><ul><li>检查<code>/etc/ranger/elasticsearchdev/policycache</code>目录下是否存在<code>REPOSITORY_NAME.json</code>文件。</li><li>在 Ranger Admin Web 门户的 Audit 功能的 Plugins 选项卡页面上检查对应插件状态。</li><li>使用对应软件，验证策略是否生效（可选）</li></ul><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul><li>Ranger2.0</li><li>Atlas2.1</li><li>CDH6.x</li></ul><h2 id="Atlas"><a href="#Atlas" class="headerlink" title="Atlas"></a>Atlas</h2><h3 id="Atlas通用配置"><a href="#Atlas通用配置" class="headerlink" title="Atlas通用配置"></a>Atlas通用配置</h3><h4 id="服务配置-1"><a href="#服务配置-1" class="headerlink" title="服务配置"></a>服务配置</h4><p><img src="images/Pasted%20image%2020210701003658.png" alt="Pasted image 20210701003658"></p><h4 id="插件配置"><a href="#插件配置" class="headerlink" title="插件配置"></a>插件配置</h4><p>见<a href="/posts/2c8f6697#%E9%85%8D%E7%BD%AE%E5%86%85%E5%AE%B9" data-pjax-state target="_Blank">配置内容</a></p>]]></content>
    
    
    <summary type="html">ranger集成其他组件的插件安装步骤及注意事项</summary>
    
    
    
    <category term="集成" scheme="https://chushen.xyz/categories/%E9%9B%86%E6%88%90/"/>
    
    
    <category term="集成" scheme="https://chushen.xyz/tags/%E9%9B%86%E6%88%90/"/>
    
    <category term="ranger" scheme="https://chushen.xyz/tags/ranger/"/>
    
    <category term="插件" scheme="https://chushen.xyz/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
</feed>
